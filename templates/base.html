{% load static %}
<link href="{% static 'css/bootstrap337.min.css' %} rel=" stylesheet" id="bootstrap-css">


<!DOCTYPE html>
<html lang="en">

<head>
  <title>Messenger App</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap337.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>

<body>
  <div class="container app">
    <div class="row app-one">
      <div class="col-sm-4 side">
        <div class="side-one">
          <div class="row heading">
            <p align="right" style="font-size:160%;">Contacts <a href="{% url 'addcontact' name %}"
                class="btnsend btn-success"> +</a></p>
          </div>
          <div class="row sideBar" id="menuup">
          </div>
          <div class="row heading">
            <p align="right" style="font-size:160%;">Groups <a href="{% url 'addgroup' name %}"
                class="btnsend btn-success"> +</a></p>
          </div>
          <div class="row sideBar" id="menudown">
          </div>
        </div>
      </div>
      <div class="col-sm-8 conversation">
        {% block content %}
        {% endblock %}
      </div>
    </div>
  </div>
</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script>
  $(document).ready(function () {
    setInterval(function () {
      $.ajax({
        type: 'GET',
        url: "/getcontacts",
        success: function (response) {
          $("#menuup").empty();
          for (var key in response.contacts) {
            var temp = "<div class='row sideBar-body'>" +
              "<div class='col-sm-9 col-xs-9 sideBar-main'>" +
              "<div class='row'>" +
              "<div class='col-sm-8 col-xs-8 sideBar-name'>" +
              `<a href= "{% url 'chatcontact' name 0 %}" class='details'> `.replace('0', response.contacts[key].id) +
              "<span class='name-meta'>" +
              response.contacts[key].name +
              "</span>" +
              "</a>" +
              "</div>" +
              "</div>" +
              "</div>" +
              "</div>";
            $("#menuup").append(temp);
          }
        },
        error: function (response) {
          alert('An error occured')
        }
      });
    }, 1000);
  })
</script>
<script>
  $(document).ready(function () {

    setInterval(function () {
      $.ajax({
        type: 'GET',
        url: "/getgroups",
        success: function (response) {
          $("#menudown").empty();
          for (var key in response.groups) {
            var temp = "<div class='row sideBar-body'>" +
              "<div class='col-sm-9 col-xs-9 sideBar-main'>" +
              "<div class='row'>" +
              "<div class='col-sm-8 col-xs-8 sideBar-name'>" +
              `<a href= "{% url 'chatgroup' name 0 %}" class='details'> `.replace('0', response.groups[key].id) +
              "<span class='name-meta'>" +
              response.groups[key].name +
              "</span>" +
              "</a>" +
              "</div>" +
              "</div>" +
              "</div>" +
              "</div>";
            $("#menudown").append(temp);
          }
        },
        error: function (response) {
          alert('An error occured')
        }
      });
    }, 1000);
  })
</script>

</html>